package com.onlinemarket.dao;

import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.HashMap;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.ResultSetExtractor;
import org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate;
import org.springframework.stereotype.Component;

import com.onlinemarket.dao.UpdateClothDao.ClothResultSetExtractor;
import com.onlinemarket.entity.Cloths;
import com.onlinemarket.entity.Customers;

@Component
public class FetchCustomerDao implements FetchCustomerDaoInterface {
	
	@Autowired 
	NamedParameterJdbcTemplate jdbcTemplate;

	@Override
	public Customers fetchCustomer(String customerId) {
		
		String sql= " "
				+ "SELECT * FROM cloths "
				+ " WHERE cloth_id = :cloth_id ";
			
		  Map<String, Object> params = new HashMap<>();
		  
		 
		    params.put("cloth_id", clothId);
		
	      return jdbcTemplate.query(sql, params, new CustomerResultSetExtractor());	
		
		
		
		
	
	}
	
	
	class CustomerResultSetExtractor implements ResultSetExtractor<Cloths> {
		   @Override
		   public Cloths extractData(ResultSet rs) throws SQLException {
		     rs.next();

		     // @formatter:off
		     return Cloths.builder()
		         .clothId(rs.getString("cloth_id"))
		         .clothColor(rs.getString("cloth_color"))
		         .clothSize(rs.getInt("cloth_size"))
		         .catagory(rs.getString("catagory"))
		         .price(rs.getInt("cloth_price"))		       
		         .build();
		     // @formatter:on
		   }
		 }

}
